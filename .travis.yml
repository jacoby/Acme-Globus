branches:
  except:
    - gh-pages
language: perl
before_install:
    - cpanm JSON
    - cpanm Net::OpenSSH 
perl:
  - "5.24"
  - "5.22"
  - "5.20"
  - "5.18"  # IO::Tty is missing on the Travis server or cannot be installed?
  - "5.16"
  - "5.14"
  - "5.12"
  - "5.10"

install:
  - export RELEASE_TESTING=1 AUTOMATED_TESTING=1 AUTHOR_TESTING=1 HARNESS_OPTIONS=c HARNESS_TIMER=1
  - cpanm --quiet --notest --installdeps .

script:
  - prove -lrsv t

notifications:
  email:
    recipients:
      - jacoby.david@gmail.com
    on_success: change # default: change
    on_failure: always # default: always
  irc:
    channels:
      - "irc.perl.org#purduepm"
    template:
      - "%{result}: %{repository} (%{commit}) %{commit_subject}"
    on_success: change
    on_failure: always
    use_notice: true
